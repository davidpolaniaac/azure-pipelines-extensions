{
  "id": "50ACC50F-7D15-470B-83C1-578B3F3EEBA2",
  "name": "IISWebAppExtension",
  "friendlyName": "IIS Web Application Extension",
  "description": "Deploy by MSDeploy, create/update website & app pools",
  "helpMarkDown": "[More Information](http://aka.ms/iiswebappdeployreadme)",
  "category": "Deploy",
  "visibility": [
    "Build",
    "Release"
  ],
  "author": "Microsoft Corporation",
  "version": {
    "Major": 1,
    "Minor": 0,
    "Patch": 0
  },
  "demands": [
  ],
  "minimumAgentVersion": "1.99.0",
  "groups": [
    {
      "name": "deployment",
      "displayName": "Deployment",
      "isExpanded": true
    },
    {
      "name": "advanced",
      "displayName": "Advanced",
      "isExpanded": false
    }
  ],
  "inputs": [
    {
      "name": "machinesList",
      "type": "multiLine",
      "label": "Machines",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Provide a comma separated list of machine IP addresses or FQDNs along with ports. Port is defaulted based on the selected protocol. <br>Eg: dbserver.fabrikam.com,dbserver_int.fabrikam.com:5986,192.168.12.34:5986 <br>Or provide output variable of other tasks. Eg: $(variableName)"
    },
    {
      "name": "AdminUserName",
      "type": "string",
      "label": "Admin Login",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Administrator login for the target machines."
    },
    {
      "name": "AdminPassword",
      "type": "string",
      "label": "Password",
      "defaultValue": "",
      "required": true,
      "helpMarkDown": "Administrator password for the target machines. <br>It can accept variable defined in Build/Release definitions as '$(passwordVariable)'. <br>You may mark variable type as 'secret' to secure it. "
    },
    {
      "name": "WinRMProtocol",
      "type": "radio",
      "label": "Protocol",
      "required": true,
      "defaultValue": "HTTPS",
      "options": {
        "Http": "HTTP",
        "Https": "HTTPS"
      },
      "helpMarkDown": "Select the protocol to use for the WinRM connection with the machine(s). Default is HTTPS."
    },
    {
      "name": "TestCertificate",
      "type": "boolean",
      "label": "Test Certificate",
      "defaultValue": "true",
      "visibleRule": "WinRMProtocol = Https",
      "required": false,
      "helpMarkDown": "Select the option to skip validating the authenticity of the machine's certificate by a trusted certification authority. The parameter is required for the WinRM HTTPS protocol."
    },
    {
      "name": "WebDeployPackage",
      "type": "string",
      "label": "Web Deploy Package",
      "required": true,
      "groupName": "deployment",
      "defaultValue": "",
      "helpMarkDown": "Location of the Web Deploy (MSDeploy) zip file on the target machines or on a UNC path like, \\\\\\\\BudgetIT\\WebDeploy\\WebDeployPackage.zip. The UNC path should be accessible to the machine's administrator account. Environment variables are also supported like, $env:windir, $env:systemroot, like, $env:windir\\FabrikamFibre\\Web."
    },
    {
      "name": "WebDeployParamFile",
      "type": "string",
      "label": "Web Deploy Parameter File",
      "required": false,
      "groupName": "deployment",
      "defaultValue": "",
      "helpMarkDown": "Location of the Parameter file on the target machines or on a UNC path. Parameter file is used to override Web application configuration settings like, IIS Web application name or database connection string."
    },
    {
      "name": "OverRideParams",
      "type": "multiLine",
      "label": "Override Parameters",
      "required": false,
      "groupName": "deployment",
      "defaultValue": "",
      "helpMarkDown": "Parameters specified here will override the parameters in the MSDeploy zip file and the Parameter file. To override more than one parameter use line separator, e.g., <br/> \"IIS Web Application Name\"=\"Fabrikam\" <br/> \"ConnectionString\"=\"Server=localhost;Database=Fabrikam;\""
    },
    {
      "name": "WebsiteName",
      "type": "string",
      "label": "Website Name",
      "required": true,
      "groupName": "deployment",
      "defaultValue": "",
      "helpMarkDown": "Name of the website that will be updated."
    },
    {
      "name": "DeployInParallel",
      "type": "boolean",
      "label": "Deploy in Parallel",
      "defaultValue": "true",
      "required": false,
      "groupName": "advanced",
      "helpMarkDown": "Setting it to true will deploy the Web application in-parallel on the target machines."
    }
  ],
    "instanceNameFormat": "Deploy IIS App: $(WebDeployPackage)",
    "execution": {
        "PowerShell": {
        "target": "$(currentDirectory)\\InvokeDeployIISWebApp.ps1",
        "argumentFormat": "",
        "workingDirectory": "$(currentDirectory)"
        }
    }
}
